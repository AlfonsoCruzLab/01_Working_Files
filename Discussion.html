<!DOCTYPE html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-T5Y4R5D7T0"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-T5Y4R5D7T0");
    </script>
	  
    
    <!-- markup by saul -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/styles.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
    <!-- end markup by saul -->
    
    <meta property="og:title" content="WE ARE HERE TO HELP YOU">
    <meta property="og:type" content="article" />
    <meta property="og:image" content="https://weareheretohelpyou.uk/og.jpg">
    <meta property="og:url" content="https://weareheretohelpyou.uk/">
    <meta name="twitter:card" content="summary_large_image">
    
    <!--  Non-Essential, But Recommended -->
    <meta property="og:description" content="A series of projects looking at a personal experience applying for mental health aid from public services in the UK.">
    <meta property="og:site_name" content="WE ARE HERE TO HELP YOU">
    <meta name="twitter:image:alt" content="WE ARE HERE TO HELP YOU">

    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://unpkg.com/panzoom@9.4.0/dist/panzoom.min.js"></script>
  </head>
  <body>
    <button id="menu"><img src="/vectors/menu.svg" alt="menu" /></button>
    <div id="nav">
      <button id="close" class="close">X</button>
      <a href="#000">Introduction</a>
      <a href="#100">100%: Diagramming</a>
      <a href="#200">200%: Mapping</a>
      <a href="#300">300%: Gleaning</a>
      <a href="#400">400%: Distilling</a>
      <a href="#500">500%: Simulating</a>
      <a href="#600">600%: Discussing</a>
      <a href="mailto:info@alfonsocruz.es" id="Alfonso">Alfonso Cruz 2022</a>
    </div>

        <div id="disqus_thread" style="width: 100%"></div>
        <script></script>
        <noscript
          >Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript"
            >comments powered by Disqus.</a
          ></noscript
          >

    <div id="footer">
      <hr />
      <div style="width: 50%; display: inline-block; float: left">
        <a href="http://www.alfonsocruz.com" target="_blank" style="cursor: help"
          >Alfonso Cruz Castillo</a
        >
      </div>
      <div
        style="
          text-align: right;
          width: 50%;
          display: inline-block;
          float: left;
        "
      >
        MA-GCD CSM/UAL 2022
      </div>
    </div>

    <script>
      const navLinkClickHandler = (link) => {
        const currentActiveLink = document.querySelector("#nav .active");

        if (currentActiveLink) {
          currentActiveLink.classList.remove("active");
        }

        if (link.href !== "#500") {
          VR.pause();
        }

        link.classList.add("active");
      };

      const VR = {
        isActive: false,
        isPlaying: false,
        currentTime: 0,
        scene: document.querySelector("#scene"),
      };

      VR.getPanels = () => {
        VR.panels = [];

        const panelEls = document.querySelectorAll("a-plane[video-component]");

        for (let i = 0; i < panelEls.length; i++) {
          const el = panelEls[i];

          const panel = {
            isPlaying: false,
            el: el,
            video: document.querySelector(el.getAttribute("src")),
            sound: el.components.sound,
            delay: el.getAttribute("video-component").delay,
            play: function () {
              this.isPlaying = true;

              this.video.play();
              this.sound.playSound();
            },
            pause: function () {
              this.isPlaying = false;

              this.video.pause();
              this.sound.pauseSound();
            },
            reset: function () {
              this.isPlaying = false;

              this.video.pause();
              this.video.currentTime = 0;
              this.sound.stopSound();
            },
          };

          VR.panels[i] = panel;
        }
      };

      VR.init = () => {
        VR.scene.addEventListener("loaded", () => {
          VR.getPanels();
        });

        VR.scene.onmousedown = () => {
          VR.start();

          VR.scene.onmousedown = undefined;
        };
      };

      VR.start = () => {
        VR.isActive = true;
        VR.isPlaying = true;

        const playPanels = () => {
          VR.panels.forEach((panel) => {
            if (!panel.isPlaying && panel.delay <= VR.currentTime) {
              panel.play();
            }
          });
        };

        window.setInterval(() => {
          if (VR.isPlaying) {
            playPanels();
          }

          VR.currentTime += 100;
        }, 100);
      };

      VR.play = () => {
        VR.isPlaying = true;
      };

      VR.pause = () => {
        VR.isPlaying = false;

        VR.panels.forEach((panel) => {
          panel.pause();
        });
      };

      VR.togglePlay = () => {
        if (VR.isActive && VR.isPlaying) {
          VR.pause();
        } else if (VR.isActive && !VR.isPlaying) {
          VR.play();
        }
      };

      VR.reset = () => {
        VR.isPlaying = false;
        VR.currentTime = 0;

        VR.panels.forEach((panel) => {
          panel.reset();
        });
      };

      window.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll("#nav a").forEach((link) => {
          link.addEventListener("click", () => {
            navLinkClickHandler(link);
          });
        });

        const svgDiagram = document.querySelector(".svg-diagram img");

        panzoom(svgDiagram);

        VR.init();

        document.body.onkeyup = function (e) {
          if (e.code == "Space") {
            VR.togglePlay();
          }
        };
        
        /* markup by saul */
        $( "#play" ).on( "click", function() {
          VR.togglePlay();
        }); 
        /* end markup by saul */
        
      });

      /**
       *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
       *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */

      var disqus_config = function () {};

      (function () {
        // DON'T EDIT BELOW THIS LINE
        var d = document,
          s = d.createElement("script");
        s.src = "https://we-are-here-to-help-you.disqus.com/embed.js";
        s.setAttribute("data-timestamp", +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    
    <!--markup by saul -->
    <script src="/scripts.js"></script>
    <!-- end markup by saul -->
    
  </body>
</html>
