<!DOCTYPE html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-T5Y4R5D7T0"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-T5Y4R5D7T0");
    </script>

    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  </head>
  <body>
        <script>
          AFRAME.registerComponent("video-component", {
            schema: {
              delay: { type: "number", default: 0 },
            },
          });
        </script>

        <a-scene id="scene">
          <a-assets>
            <video
              id="SSRI"
              src="videos/SSRI.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="Samaritans"
              src="videos/Samaritans.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="PHQ9"
              src="videos/PHQ9.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="Sertraline"
              src="videos/Sertraline.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="Assessment"
              src="videos/Assessment.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="CBT"
              src="videos/CBT.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="TLP"
              src="videos/TLP.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="Mind"
              src="videos/Mind.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="CALM"
              src="videos/CALM.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="CP"
              src="videos/CP.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="Grounding"
              src="videos/Grounding.mp4"
              loop="true"
              preload="auto"
            ></video>
            <video
              id="Ambulance"
              src="videos/Ambulance.mp4"
              loop="true"
              preload="auto"
            ></video>
          </a-assets>

          <a-entity light="type: ambient; color: #fff"></a-entity>
          <a-entity
            light="type: directional; color: #fff; intensity: 2"
            position="0 4 0"
          ></a-entity>

          <a-plane
            geometry="primitive: circle; radius: 3.725; segments: 60;"
            position="0 0 0"
            rotation="-90 15 0"
            color="#000"
          ></a-plane>

          <a-plane
            video-component="delay:001000"
            sound="src:url(audio/SSRI.mp3); loop: true; rolloffFactor: 1.5; volume: 1;"
            width="2"
            height="1.125"
            position="0 1.5 -3.725"
            rotation="0 0 0"
            src="#SSRI"
          ></a-plane>

          <a-plane
            video-component="delay:055000"
            sound="src:url(audio/Samaritans.mp3); loop: true; rolloffFactor: 1.5; volume: 2;"
            width="2"
            height="1.125"
            position="3.225 1.5 -1.8625"
            rotation="0 -60 0"
            src="#Samaritans"
          ></a-plane>

          <a-plane
            video-component="delay:105000"
            sound="src:url(audio/Mind.mp3); loop: true; rolloffFactor: 1.5; volume: 3;"
            width="2"
            height="1.125"
            position="3.225 1.5 1.8625"
            rotation="0 -120 0"
            src="#Mind"
          ></a-plane>

          <a-plane
            video-component="delay:120000"
            sound="src:url(audio/CALM.mp3); loop: true; rolloffFactor: 1.5; volume: 4;"
            width="2"
            height="1.125"
            position="0 1.5 3.725"
            rotation="0 -180 0"
            src="#CALM"
          ></a-plane>

          <a-plane
            video-component="delay:130000"
            sound="src:url(audio/PHQ9.mp3); loop: true; rolloffFactor: 1.5; volume: 5;"
            width="2"
            height="1.125"
            position="-3.225 1.5 1.8625"
            rotation="0 -240 0"
            src="#PHQ9"
          ></a-plane>

          <a-plane
            video-component="delay:145000"
            sound="src:url(audio/Assessment.mp3); loop: true; rolloffFactor: 1.5; volume: 6;"
            width="2"
            height="1.125"
            position="-3.225 1.5 -1.8625"
            rotation="0 -300 0"
            src="#Assessment"
          ></a-plane>

          <a-plane
            video-component="delay:160000"
            sound="src:url(audio/CBT.mp3); loop: true; rolloffFactor: 1.5; volume: 7;"
            width="2"
            height="1.125"
            position="-1.8625 1.5 -3.225"
            rotation="0 30 0"
            src="#CBT"
          ></a-plane>

          <a-plane
            video-component="delay:170000"
            sound="src:url(audio/TLP.mp3); loop: true; rolloffFactor: 1.5; volume: 8;"
            width="2"
            height="1.125"
            position="1.8625 1.5 -3.225"
            rotation="0 -30 0"
            src="#TLP"
          ></a-plane>

          <a-plane
            video-component="delay:180000"
            sound="src:url(audio/CP.mp3); loop: true; rolloffFactor: 1.5; volume: 9;"
            width="2"
            height="1.125"
            position="3.725 1.5 0"
            rotation="0 -90 0"
            src="#CP"
          ></a-plane>

          <a-plane
            video-component="delay:185000"
            sound="src:url(audio/Sertraline.mp3); loop: true; rolloffFactor: 1.5; volume: 10;"
            width="2"
            height="1.125"
            position="1.8625 1.5 3.225"
            rotation="0 -150 0"
            src="#Sertraline"
          ></a-plane>

          <a-plane
            video-component="delay:190000"
            sound="src:url(audio/Grounding.mp3); loop: true; rolloffFactor: 1.5; volume: 11;"
            width="2"
            height="1.125"
            position="-1.8625 1.5 3.225"
            rotation="0 -210 0"
            src="#Grounding"
          ></a-plane>

          <a-plane
            video-component="delay:195000"
            sound="src:url(audio/Ambulance.mp3); loop: true; rolloffFactor: 1.5; volume: 12;"
            width="2"
            height="1.125"
            position="-3.725 1.5 0"
            rotation="0 -270 0"
            src="#Ambulance"
          ></a-plane>

          <a-sky color="#000"></a-sky>
        </a-scene>
<script>

    const scene = document.getElementById("scene");
    scene.onmousedown = () => {

      let videoComponents = scene.querySelectorAll('[video-component]');

      Array.from(videoComponents).forEach(video => {

        const thisVideo = video;
        const id = video.getAttribute('src');

        setTimeout(function () {
          document.getElementById(id.split('#')[1]).play();
          thisVideo.components.sound.playSound();
        }, video.components['video-component'].data.delay);

        console.log(video.components['video-component'].data.delay);


      });

      scene.onmousedown = undefined;

    }

  </script>
  </body>
</html>
